var Brizy=function(){"use strict";function e(e){var r=e.ownerDocument,t=r.head,n=r.createElement("style");n.id="brz-ed-loading-curtain",n.innerText="@keyframes spin{100%{transform:rotate(360deg)}}.brz-ed-page-curtain{position:fixed;left:0;right:0;top:0;bottom:0;background-color:#141923;z-index:1000}.brz-ed-page-spinner,.brz-ed-page-spinner:after,.brz-ed-page-spinner:before{content:'';position:absolute;top:50%;left:50%;border:3px solid transparent;border-radius:50%;animation:spin 1s linear infinite}.brz-ed-page-spinner{width:100px;height:100px;margin:-50px 0 0 -50px;border-top-color:#22b0da;animation-duration:2.5s}.brz-ed-page-spinner:after{width:80px;height:80px;margin:-40px 0 0 -40px;border-right-color:#ed2164;animation-duration:2s}.brz-ed-page-spinner:before{width:60px;height:60px;margin:-30px 0 0 -30px;border-bottom-color:#fff}",t.appendChild(n);var i=r.createElement("div"),o=r.createElement("div");i.className="brz-ed-page-curtain",o.className="brz-ed-page-spinner",i.appendChild(o),e.appendChild(i)}function r(e){e.removeChild(e.querySelector(".brz-ed-page-curtain"))}function t(e,r,t){return new Promise(function(n,i){var o;switch(r){case"js":(o=e.ownerDocument.createElement("script")).type="text/javascript",o.src=t;break;case"css":(o=e.ownerDocument.createElement("link")).rel="stylesheet",o.type="text/css",o.href=t;break;default:throw new Error("can't load unknown type "+r)}o.onload=n,o.onerror=i,e.appendChild(o)})}return{init:function(n){var i;try{i=window.self!==window.top}catch(e){return!0}if(!i)throw new Error("Brizy init script must be loaded inside an iframe");var o=window.parent.document.querySelector("iframe#brz-ed-iframe");if(!(null!==o))throw new Error('Brizy init script must be loaded inside an iframe with id="brz-ed-iframe"');var a=document.querySelector("#brz-ed-root");if(!(null!==a))throw new Error("Brizy root div (#brz-ed-root) must be created before init script is loaded");var d=a.ownerDocument.head,s=a.ownerDocument.body,c=o.ownerDocument.head,p=o.ownerDocument.body;p.classList.add("brz","brz-ed"),o.classList.add("brz-ed-iframe--desktop"),s.classList.add("brz","brz-ed","brz-ed--desktop"),e(p),a.addEventListener("brz.render",function(){r(p)});var l=n.urls.assets,u=l+"/editor/css/editor.css",b="https://cdn.polyfill.io/v2/polyfill.js?features=IntersectionObserver,IntersectionObserverEntry",m=l+"/editor/js/editor.vendor.js",f=l+"/editor/js/editor.js",h=void 0===window.jQuery;t(d,"css",u),Promise.all([t(s,"js",b),h?t(s,"js","https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"):Promise.resolve()]).then(function(){return t(s,"js",m)}).then(function(){return window.__VISUAL_CONFIG__=n,t(s,"js",f)}),t(c,"css",u),t(p,"js",b)}}}();